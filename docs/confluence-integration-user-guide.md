# Руководство пользователя по интеграции с Confluence

## Обзор

Интеграция с Confluence позволяет подключить TeeZeeNator к вашему рабочему пространству Atlassian Confluence, предоставляя возможности:

- Ссылаться на статьи Confluence напрямую в ваших требованиях
- Автоматически включать содержимое Confluence в ваши технические спецификации
- Публиковать сгенерированные спецификации обратно в Confluence

## Начало работы

### Настройка подключения к Confluence

1. **Откройте Настройки**: Перейдите на экран Настройки в TeeZeeNator
2. **Включите Confluence**: Переключите тумблер "Подключить Confluence" в положение ВКЛ
3. **Настройте подключение**:
   - **Базовый URL**: Введите базовый URL вашего Confluence (например, `https://yourcompany.atlassian.net`)
   - **API токен**: Введите ваш API токен Confluence (см. Настройка токена ниже)
4. **Тест подключения**: Нажмите "Тест подключения" для проверки ваших настроек
5. **Сохранить**: После успешного теста подключения (зеленый индикатор), нажмите "Сохранить"

### Настройка вашего API токена Confluence

1. Перейдите в настройки аккаунта Atlassian: https://id.atlassian.com/manage-profile/security/api-tokens
2. Нажмите "Создать API токен"
3. Дайте ему описательное название (например, "Интеграция TeeZeeNator")
4. Скопируйте сгенерированный токен и вставьте его в поле Токен в TeeZeeNator

**Важно**: Храните ваш API токен в безопасности и никогда не делитесь им с другими.

## Использование содержимого Confluence в требованиях

### Ссылки на статьи Confluence

После подключения Confluence вы можете включать содержимое статей Confluence в ваши требования:

1. **В поле Исходных требований**: Вставьте любой URL статьи Confluence
2. **Автоматическая обработка**: TeeZeeNator автоматически обнаружит и обработает ссылки
3. **Интеграция содержимого**: Содержимое статьи будет включено в генерацию ваших требований

### Поддерживаемые форматы URL

- Полные URL статей: `https://yourcompany.atlassian.net/wiki/spaces/SPACE/pages/123456/Article+Title`
- Короткие URL: `https://yourcompany.atlassian.net/wiki/x/ABC123`

### Визуальные индикаторы

- **Подсказка Confluence**: При подключении вы увидите подсказку под полем Исходных требований
- **Статус обработки**: Ссылки обрабатываются автоматически с визуальной обратной связью
- **Сохранение исходных ссылок**: Ваши исходные ссылки остаются видимыми в интерфейсе

## Публикация в Confluence

### Предварительные требования

- Confluence должен быть подключен и активен
- Текущий режим вывода должен быть установлен на "Markdown"
- У вас должны быть сгенерированные требования для публикации

### Процесс публикации

1. **Сгенерируйте требования**: Создайте ваши технические спецификации как обычно
2. **Нажмите Опубликовать**: Нажмите кнопку "Опубликовать в Confluence" на панели результатов
3. **Выберите вариант публикации**:

#### Вариант 1: Создать новую страницу
- Выберите "Создать новую страницу"
- Введите URL родительской страницы, где должна быть создана новая страница
- Нажмите "Создать"
- Отслеживайте прогресс через индикаторы статуса

#### Вариант 2: Обновить существующую страницу
- Выберите "Изменить существующую страницу"
- Введите URL страницы, которую вы хотите обновить
- Нажмите "Изменить"
- Отслеживайте прогресс через индикаторы статуса

### Прогресс публикации

Система будет показывать прогресс через эти шаги:
- **Проверка родительской страницы/страницы**: Проверяет целевое местоположение
- **Создание новой статьи/Внесение изменений**: Выполняет операцию публикации
- **Требования успешно опубликованы**: Завершение со ссылкой на опубликованную страницу

## Устранение неполадок

### Проблемы с подключением

**Проблема**: Красный индикатор подключения при тестировании соединения
**Решения**:
- Проверьте правильность вашего базового URL (не включайте суффикс `/wiki/rest/api/`)
- Убедитесь, что ваш API токен действителен и не истек
- Убедитесь, что у вас есть доступ к пространству Confluence
- Проверьте ваше интернет-соединение

**Проблема**: Подключение работает, но ссылки не обрабатываются
**Решения**:
- Убедитесь, что URL Confluence соответствуют вашему настроенному базовому URL
- Проверьте, что у вас есть доступ на чтение к указанным страницам
- Убедитесь, что URL страниц действительны и доступны

### Проблемы с публикацией

**Проблема**: Кнопка "Опубликовать в Confluence" неактивна
**Решения**:
- Убедитесь, что Confluence подключен и активен
- Переключитесь в режим вывода Markdown
- Сначала сгенерируйте требования перед попыткой публикации

**Проблема**: Публикация не удается из-за ошибок разрешений
**Решения**:
- Убедитесь, что у вас есть доступ на запись в целевое пространство
- Проверьте, что родительская страница существует и доступна
- Убедитесь, что ваш API токен имеет достаточные разрешения

**Проблема**: Создание страницы не удается
**Решения**:
- Проверьте правильность и доступность URL родительской страницы
- Убедитесь, что у вас есть разрешение на создание страниц в этом пространстве
- Убедитесь, что родительская страница существует

### Проблемы с производительностью

**Проблема**: Медленная обработка ссылок
**Решения**:
- Система автоматически задерживает запросы, чтобы избежать перегрузки API
- Большие статьи могут требовать больше времени для обработки
- Проверьте скорость вашего интернет-соединения

## Лучшие практики

### Безопасность
- Никогда не делитесь вашим API токеном с другими
- Регулярно обновляйте ваши API токены для безопасности
- Используйте токены с минимально необходимыми разрешениями

### Управление содержимым
- Используйте описательные заголовки при создании новых страниц Confluence
- Организуйте опубликованное содержимое в соответствующих пространствах
- Поддерживайте ваше содержимое Confluence в актуальном состоянии

### Производительность
- Избегайте включения слишком много ссылок Confluence в одно требование
- Используйте наиболее релевантные и актуальные статьи
- Очищайте обработанное содержимое, когда оно больше не нужно

## Ограничения

- Для публикации поддерживается только формат Markdown
- Ограничения API могут влиять на скорость обработки при многих ссылках
- Некоторое форматирование содержимого Confluence может быть упрощено во время обработки
- Требуется интернет-соединение для всех операций Confluence

## Поддержка

Если вы столкнулись с проблемами, не освещенными в этом руководстве:
1. Проверьте журналы приложения для подробных сообщений об ошибках
2. Проверьте ваши разрешения и доступ в Confluence
3. Протестируйте настройки вашего подключения
4. Убедитесь, что ваш API токен действителен и имеет соответствующие разрешения
