# TZ Generator - Генератор технических заданий

Десктопное приложение для генерации технических заданий с помощью OpenAI API.

## Требования

- Flutter SDK 3.0+
- Для Windows: включить режим разработчика (`start ms-settings:developers`)
- OpenAI API ключ

## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости:
   ```
   flutter pub get
   ```

3. Сгенерируйте код:
   ```
   flutter packages pub run build_runner build
   ```

4. Запустите приложение:
   ```
   flutter run -d windows  # для Windows
   flutter run -d macos    # для macOS
   ```

## Возможности

### Backend на Dart:
✅ Хранение конфигурации OpenAI API (URL, токен) в локальном хранилище
✅ Выбор используемой модели из списка доступных
✅ AI-клиент по OpenAI API с поддержкой Chat API
✅ Встроенный шаблон ТЗ (tz_pattern.md)
✅ Системный промт с ролью "Senior System Analyst"
✅ Сохранение результатов в Markdown формате
✅ **Музикация ТЗ** - генерация музыки в стиле Russian Gangsta Rap через [GenAPI](https://gen-api.ru/) (Suno)

### Музикация (новое в v1.2.2):
✅ Автоматическая генерация Lyrics из технического задания
✅ Интеграция с GenAPI v5 (Suno)
✅ Генерация 2-х вариантов композиции
✅ Встроенный аудио-плеер для прослушивания
✅ Скачивание MP3 файлов в папку загрузок
✅ Мониторинг прогресса генерации (0-100%)
✅ User-friendly уведомления об ошибках

### UI на Flutter (в стиле МТС):
✅ Проверка конфигурации при запуске
✅ Страница настройки с проверкой соединения
✅ Выбор модели из выпадающего списка
✅ Поля для ввода требований и изменений
✅ Рендеринг сгенерированного ТЗ в Markdown
✅ История запросов
✅ Кнопка сохранения в файл
✅ Панель управления музикацией с индикаторами статуса

### Стилизация:
✅ Фирменные цвета МТС (красный `#FF1F2C`)
✅ Минималистичный дизайн
✅ Скругленные углы кнопок
✅ Легкие тени
✅ Анимированные уведомления с техническими деталями  

## Архитектура

- `lib/models/` - модели данных (AppConfig, OpenAIModel, ChatMessage, etc.)
- `lib/services/` - бизнес-логика (ConfigService, OpenAIService, FileService)
- `lib/screens/` - экраны приложения (SetupScreen, MainScreen)
- `lib/theme/` - тема приложения
- `tz_pattern.md` - шаблон технического задания

## Использование

### Генерация ТЗ:
1. При первом запуске откроется страница настройки
2. Введите URL OpenAI API и токен
3. Проверьте соединение и выберите модель
4. В рабочей области введите сырые требования
5. Нажмите "Сгенерировать ТЗ"
6. При необходимости внесите изменения и сгенерируйте заново
7. Сохраните результат в .md файл

### Музикация ТЗ (v1.2.2):
1. В настройках добавьте API ключ [GenAPI](https://gen-api.ru/) и включите музикацию
2. Сгенерируйте техническое задание
3. Нажмите кнопку "Музицировать"
4. Подтвердите генерацию музыки (списывается ~17 руб. с баланса GenAPI)
5. Дождитесь завершения генерации (обычно 2-3 минуты)
6. Прослушайте готовые треки прямо в приложении
7. Откройте папку с файлами для сохранения треков

## Настройка для Windows

Для работы плагинов в Windows необходимо включить режим разработчика:
1. Откройте настройки: `Win + I`
2. Перейдите в "Обновление и безопасность" → "Для разработчиков"
3. Включите "Режим разработчика"

Или выполните команду: `start ms-settings:developers`

## Устранение неполадок

- Если возникают ошибки с file_picker, убедитесь что включен режим разработчика в Windows
- При проблемах с генерацией кода запустите: `flutter packages pub run build_runner clean`
- Для обновления зависимостей: `flutter pub upgrade`
